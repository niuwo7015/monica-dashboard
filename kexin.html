<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>è«å¦®å¡æ‘©å¡ Â· ä»Šæ—¥è·Ÿè¿›</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700;900&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0f0f0f;
    --card-bg: #1a1a1a;
    --red: #ff4757;
    --red-bg: rgba(255,71,87,0.08);
    --yellow: #ffa502;
    --yellow-bg: rgba(255,165,2,0.08);
    --green: #2ed573;
    --green-bg: rgba(46,213,115,0.08);
    --blue: #3742fa;
    --text: #f1f1f1;
    --text-dim: #888;
    --text-mid: #bbb;
    --radius: 16px;
    --done-bg: rgba(46,213,115,0.06);
  }

  * { margin:0; padding:0; box-sizing:border-box; }

  body {
    font-family: 'Noto Sans SC', sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    padding: 20px 16px 40px;
    max-width: 480px;
    margin: 0 auto;
    -webkit-font-smoothing: antialiased;
  }

  /* Header */
  .header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
  }
  .header h1 {
    font-size: 20px;
    font-weight: 700;
  }
  .header .badge {
    font-size: 12px;
    padding: 4px 10px;
    border-radius: 20px;
    font-weight: 500;
  }
  .badge-s { background: var(--red-bg); color: var(--red); }

  /* Date Selector */
  .date-selector {
    display: flex;
    gap: 6px;
    margin-bottom: 24px;
    overflow-x: auto;
    padding-bottom: 4px;
    -webkit-overflow-scrolling: touch;
  }
  .date-selector::-webkit-scrollbar { display: none; }
  .date-btn {
    flex-shrink: 0;
    padding: 10px 16px;
    border-radius: 12px;
    background: var(--card-bg);
    border: 1px solid rgba(255,255,255,0.04);
    color: var(--text-dim);
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    text-align: center;
    min-width: 72px;
  }
  .date-btn.active {
    background: rgba(255,255,255,0.08);
    color: var(--text);
    border-color: rgba(255,255,255,0.12);
  }
  .date-btn .day-name {
    font-size: 10px;
    color: var(--text-dim);
    display: block;
    margin-bottom: 2px;
  }
  .date-btn.active .day-name { color: var(--text-mid); }

  /* Progress Bar */
  .progress-section {
    margin-bottom: 24px;
  }
  .progress-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
  }
  .progress-label {
    font-size: 13px;
    color: var(--text-dim);
  }
  .progress-count {
    font-size: 13px;
    color: var(--green);
    font-weight: 600;
  }
  .progress-bar {
    height: 6px;
    background: var(--card-bg);
    border-radius: 3px;
    overflow: hidden;
  }
  .progress-fill {
    height: 100%;
    background: var(--green);
    border-radius: 3px;
    transition: width 0.4s ease;
  }

  /* Customer Cards */
  .customer-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .customer-card {
    background: var(--card-bg);
    border-radius: var(--radius);
    padding: 16px 20px;
    border: 1px solid rgba(255,255,255,0.04);
    cursor: pointer;
    transition: all 0.2s ease;
    position: relative;
    overflow: hidden;
  }
  .customer-card::before {
    content: '';
    position: absolute;
    top: 0; left: 0;
    width: 4px;
    height: 100%;
  }
  .customer-card.priority-s::before { background: var(--red); }
  .customer-card.priority-a::before { background: var(--yellow); }
  .customer-card.priority-b::before { background: var(--blue); }

  .customer-card.done {
    background: var(--done-bg);
    border-color: rgba(46,213,115,0.1);
    opacity: 0.7;
  }
  .customer-card.done::before { background: var(--green); }

  .customer-card:active { transform: scale(0.98); }

  .card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 6px;
  }
  .customer-name {
    font-size: 16px;
    font-weight: 600;
  }
  .priority-tag {
    font-size: 11px;
    padding: 2px 8px;
    border-radius: 6px;
    font-weight: 600;
  }
  .tag-s { background: var(--red-bg); color: var(--red); }
  .tag-a { background: var(--yellow-bg); color: var(--yellow); }
  .tag-b { background: rgba(55,66,250,0.1); color: #7c83ff; }

  .card-stage {
    font-size: 12px;
    color: var(--text-mid);
    margin-bottom: 4px;
  }
  .card-issue {
    font-size: 13px;
    color: var(--text-dim);
    margin-bottom: 4px;
  }
  .card-silent {
    font-size: 11px;
    color: var(--text-dim);
  }

  /* Expandable Detail */
  .card-detail {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s ease, opacity 0.3s ease;
    opacity: 0;
  }
  .customer-card.expanded .card-detail {
    max-height: 800px;
    opacity: 1;
  }
  .detail-divider {
    height: 1px;
    background: rgba(255,255,255,0.06);
    margin: 14px 0;
  }
  .detail-section-title {
    font-size: 11px;
    color: var(--text-dim);
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 6px;
  }
  .detail-action {
    font-size: 14px;
    color: var(--text);
    line-height: 1.6;
    margin-bottom: 12px;
  }
  .detail-script {
    font-size: 13px;
    color: var(--text-mid);
    line-height: 1.6;
    background: rgba(255,255,255,0.03);
    padding: 12px;
    border-radius: 10px;
    margin-bottom: 14px;
  }

  /* Done Button */
  .done-btn {
    width: 100%;
    padding: 12px;
    border-radius: 12px;
    border: none;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    font-family: 'Noto Sans SC', sans-serif;
  }
  .done-btn.pending {
    background: var(--green);
    color: #000;
  }
  .done-btn.pending:active {
    transform: scale(0.97);
  }
  .done-btn.completed {
    background: rgba(46,213,115,0.1);
    color: var(--green);
    border: 1px solid rgba(46,213,115,0.2);
  }

  /* Animations */
  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(12px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .customer-card { animation: fadeUp 0.4s ease both; }
  .customer-card:nth-child(1) { animation-delay: 0.05s; }
  .customer-card:nth-child(2) { animation-delay: 0.1s; }
  .customer-card:nth-child(3) { animation-delay: 0.15s; }
  .customer-card:nth-child(4) { animation-delay: 0.2s; }
  .customer-card:nth-child(5) { animation-delay: 0.25s; }
</style>
</head>
<body>

<div class="header">
  <h1>å¯æ¬£çš„è·Ÿè¿›æ¸…å•</h1>
  <span class="badge badge-s">S+A+B1</span>
</div>

<!-- Date Selector -->
<div class="date-selector">
  <div class="date-btn active" onclick="switchDate(this, '0301')">
    <span class="day-name">å‘¨å…­</span>
    3/1
  </div>
  <div class="date-btn" onclick="switchDate(this, '0302')">
    <span class="day-name">å‘¨æ—¥</span>
    3/2
  </div>
  <div class="date-btn" onclick="switchDate(this, '0303')">
    <span class="day-name">å‘¨ä¸€</span>
    3/3
  </div>
  <div class="date-btn" onclick="switchDate(this, '0304')">
    <span class="day-name">å‘¨äºŒ</span>
    3/4
  </div>
  <div class="date-btn" onclick="switchDate(this, '0305')">
    <span class="day-name">å‘¨ä¸‰</span>
    3/5
  </div>
</div>

<!-- Progress -->
<div class="progress-section">
  <div class="progress-header">
    <span class="progress-label">ä»Šæ—¥è¿›åº¦</span>
    <span class="progress-count" id="progress-text">0/8 å·²è·Ÿè¿›</span>
  </div>
  <div class="progress-bar">
    <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
  </div>
</div>

<!-- Customer List -->
<div class="customer-list" id="customer-list">

  <!-- Sçº§ç¤ºä¾‹ -->
  <div class="customer-card priority-s" data-id="demo1" onclick="toggleCard(this)">
    <div class="card-header">
      <span class="customer-name">å¼ å§ (Jane)</span>
      <span class="priority-tag tag-s">Sçº§</span>
    </div>
    <div class="card-stage">é€‰ææœŸ Â· é¢æ–™æ–¹å‘æœªå®š</div>
    <div class="card-issue">å­•æ™šæœŸ+ä¸¤ä¸ªå­©å­ï¼Œéœ€è¦å¥½æ‰“ç†çš„é¢æ–™</div>
    <div class="card-silent">æ²‰é»˜ 3å¤© Â· ä¸Šæ¬¡ä½ ä»¬èŠäº†çš®å’Œå¸ƒçš„åŒºåˆ«</div>

    <div class="card-detail">
      <div class="detail-divider"></div>
      <div class="detail-section-title">ä¸‹ä¸€æ­¥</div>
      <div class="detail-action">å…ˆç¡®è®¤å¥¹å€¾å‘çš®è¿˜æ˜¯å¸ƒï¼Œä¸è¦ç›´æ¥å¯„æ ·ã€‚å¥¹å®¶æœ‰å°å­©è¦å¥½æ‰“ç†ï¼Œç§‘æŠ€å¸ƒå¯èƒ½æ˜¯æœ€ä¼˜è§£ã€‚</div>
      <div class="detail-section-title">å»ºè®®è¯æœ¯</div>
      <div class="detail-script">
        "å¼ å§ï¼Œä¹‹å‰å’±èŠäº†çš®å’Œå¸ƒä¸¤ä¸ªæ–¹å‘ï¼Œæˆ‘æƒ³äº†æƒ³ä½ å®¶æœ‰å°æœ‹å‹ï¼Œæˆ‘è§‰å¾—å¯ä»¥é‡ç‚¹çœ‹çœ‹ç§‘æŠ€å¸ƒâ€”â€”é˜²æ°´é˜²æ±¡å¥½æ‰“ç†ï¼Œçœ‹èµ·æ¥è·ŸçœŸçš®ä¹Ÿå·®ä¸å¤šã€‚ä½ è§‰å¾—è¿™ä¸ªæ–¹å‘OKçš„è¯ï¼Œæˆ‘ç»™ä½ å¯„å‡ å—æ ·çœ‹çœ‹æ‰‹æ„Ÿï¼Ÿ"
      </div>
      <div class="detail-section-title">é£é™©æç¤º</div>
      <div class="detail-action" style="color:var(--yellow);">ä¸­é£é™© Â· å­•æ™šæœŸå¯èƒ½æš‚åœå†³ç­–ï¼Œåˆ«å‚¬å¤ªç´§</div>
      <button class="done-btn pending" onclick="markDone(event, 'demo1')">âœ“ å·²è·Ÿè¿›</button>
    </div>
  </div>

  <!-- Açº§ç¤ºä¾‹ -->
  <div class="customer-card priority-a" data-id="demo2" onclick="toggleCard(this)">
    <div class="card-header">
      <span class="customer-name">å°ç±³</span>
      <span class="priority-tag tag-a">Açº§</span>
    </div>
    <div class="card-stage">é€‰ææœŸ Â· é¢æ–™çº ç»“ä¸­</div>
    <div class="card-issue">å¯¹å“ç‰Œè®¤å¯åº¦é«˜ï¼Œåœ¨å‡ ç§é¢æ–™é—´çŠ¹è±«</div>
    <div class="card-silent">æ²‰é»˜ 5å¤© Â· ä¸Šæ¬¡èŠäº†é›ªå°¼å°”å’Œç§‘æŠ€å¸ƒ</div>

    <div class="card-detail">
      <div class="detail-divider"></div>
      <div class="detail-section-title">ä¸‹ä¸€æ­¥</div>
      <div class="detail-action">å¯„ä¸¤ç§é¢æ–™æ ·å“è®©å¥¹å¯¹æ¯”æ‰‹æ„Ÿã€‚å¥¹å·²ç»è®¤å¯å“ç‰Œäº†ï¼Œå¡ç‚¹å°±åœ¨é€‰é¢æ–™ï¼Œæ¨ä¸€æŠŠå°±èƒ½è¿›è®®ä»·ã€‚</div>
      <div class="detail-section-title">å»ºè®®è¯æœ¯</div>
      <div class="detail-script">
        "å°ç±³å§ï¼Œä¸Šæ¬¡ä½ è¯´é›ªå°¼å°”å’Œç§‘æŠ€å¸ƒéƒ½å–œæ¬¢ï¼Œè¦ä¸æˆ‘ç»™ä½ å„å¯„ä¸€å—ï¼Ÿæ‘¸åˆ°æ‰‹æ„Ÿå°±å¥½é€‰äº†ï¼Œå¾ˆå¤šå®¢æˆ·éƒ½æ˜¯æ‘¸å®Œé©¬ä¸Šå°±å®šäº†ï½"
      </div>
      <button class="done-btn pending" onclick="markDone(event, 'demo2')">âœ“ å·²è·Ÿè¿›</button>
    </div>
  </div>

  <!-- B1çº§ç¤ºä¾‹ -->
  <div class="customer-card priority-b" data-id="demo3" onclick="toggleCard(this)">
    <div class="card-header">
      <span class="customer-name">Lily (åŠ æ‹¿å¤§)</span>
      <span class="priority-tag tag-b">B1çº§</span>
    </div>
    <div class="card-stage">é€‰å“æœŸ Â· æµ·è¿ä¿¡ä»»æœªè§£å†³</div>
    <div class="card-issue">è´­ä¹°åŠ›OKï¼Œæ‹…å¿ƒæµ·è¿æŸåå’Œå”®å</div>
    <div class="card-silent">æ²‰é»˜ 12å¤© Â· ä¸Šæ¬¡é—®äº†è¿è´¹å’Œä¿é™©</div>

    <div class="card-detail">
      <div class="detail-divider"></div>
      <div class="detail-section-title">ä¸‹ä¸€æ­¥</div>
      <div class="detail-action">è§£å†³è¿è¾“ä¿¡ä»»é—®é¢˜ã€‚å‘ä¹‹å‰æµ·å¤–å®¢æˆ·çš„å¼€ç®±è§†é¢‘/ç…§ç‰‡ï¼Œå±•ç¤ºåŒ…è£…è´¨é‡ã€‚å¼ºè°ƒè¿è¾“ä¿é™©å’Œå”®åæ‰¿è¯ºã€‚</div>
      <div class="detail-section-title">å»ºè®®è¯æœ¯</div>
      <div class="detail-script">
        "Lilyä½ å¥½ï½ä¸Šæ¬¡ä½ é—®çš„æµ·è¿é—®é¢˜æˆ‘æ•´ç†äº†ä¸€ä¸‹ï¼šæˆ‘ä»¬å‘åŠ æ‹¿å¤§çš„å®¢æˆ·å·²ç»æœ‰å¥½å‡ ä¸ªäº†ï¼Œå…¨ç¨‹æœ¨æ¶æ‰“åŒ…+è¿è¾“é™©å…¨ä¿ã€‚ç»™ä½ çœ‹å‡ ä¸ªå®¢æˆ·æ”¶åˆ°è´§çš„ç…§ç‰‡ï¼ŒåŒ…è£…å®Œå¥½çš„ğŸ‘‡"
      </div>
      <button class="done-btn pending" onclick="markDone(event, 'demo3')">âœ“ å·²è·Ÿè¿›</button>
    </div>
  </div>

</div>

<script>
// --- Google Sheets Integration ---
// æ›¿æ¢ä¸ºä½ çš„Google Apps Script Web App URL
const SHEET_URL = 'YOUR_GOOGLE_APPS_SCRIPT_URL';

// é”€å”®åç§°
const SALES_NAME = 'å¯æ¬£';

function toggleCard(card) {
  if (event.target.closest('.done-btn')) return;
  card.classList.toggle('expanded');
}

function switchDate(btn, date) {
  document.querySelectorAll('.date-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  // TODO: åˆ‡æ¢æ—¥æœŸååŠ è½½å¯¹åº”å®¢æˆ·åˆ—è¡¨
  updateProgress();
}

function markDone(e, customerId) {
  e.stopPropagation();
  const card = document.querySelector(`[data-id="${customerId}"]`);
  const btn = card.querySelector('.done-btn');
  
  if (card.classList.contains('done')) return;
  
  card.classList.add('done');
  btn.classList.remove('pending');
  btn.classList.add('completed');
  btn.textContent = 'âœ“ å·²å®Œæˆ';
  
  // è®°å½•åˆ°æœ¬åœ°
  const doneList = JSON.parse(localStorage.getItem('done') || '[]');
  doneList.push({
    id: customerId,
    sales: SALES_NAME,
    time: new Date().toISOString()
  });
  localStorage.setItem('done', JSON.stringify(doneList));
  
  // åŒæ­¥åˆ°Google Sheets
  if (SHEET_URL !== 'YOUR_GOOGLE_APPS_SCRIPT_URL') {
    fetch(SHEET_URL, {
      method: 'POST',
      mode: 'no-cors',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        action: 'markDone',
        sales: SALES_NAME,
        customerId: customerId,
        customerName: card.querySelector('.customer-name').textContent,
        time: new Date().toISOString()
      })
    }).catch(err => console.log('Sync failed, saved locally'));
  }
  
  updateProgress();
}

function updateProgress() {
  const total = document.querySelectorAll('.customer-card').length;
  const done = document.querySelectorAll('.customer-card.done').length;
  document.getElementById('progress-text').textContent = `${done}/${total} å·²è·Ÿè¿›`;
  document.getElementById('progress-fill').style.width = `${(done/total)*100}%`;
}

// Init
updateProgress();

// æ¢å¤å·²å®ŒæˆçŠ¶æ€
const saved = JSON.parse(localStorage.getItem('done') || '[]');
saved.forEach(item => {
  const card = document.querySelector(`[data-id="${item.id}"]`);
  if (card) {
    card.classList.add('done');
    const btn = card.querySelector('.done-btn');
    btn.classList.remove('pending');
    btn.classList.add('completed');
    btn.textContent = 'âœ“ å·²å®Œæˆ';
  }
});
updateProgress();
</script>

</body>
</html>
