<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>è«å¦®å¡æ‘©å¡ Â· ä»Šæ—¥è·Ÿè¿›</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700;900&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0f0f0f;
    --card-bg: #1a1a1a;
    --red: #ff4757;
    --red-bg: rgba(255,71,87,0.08);
    --yellow: #ffa502;
    --yellow-bg: rgba(255,165,2,0.08);
    --green: #2ed573;
    --green-bg: rgba(46,213,115,0.08);
    --blue: #3742fa;
    --text: #f1f1f1;
    --text-dim: #888;
    --text-mid: #bbb;
    --radius: 16px;
    --done-bg: rgba(46,213,115,0.06);
  }

  * { margin:0; padding:0; box-sizing:border-box; }

  body {
    font-family: 'Noto Sans SC', sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    padding: 20px 16px 40px;
    max-width: 480px;
    margin: 0 auto;
    -webkit-font-smoothing: antialiased;
  }

  /* Header */
  .header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
  }
  .header h1 { font-size: 20px; font-weight: 700; }
  .header .badge {
    font-size: 12px;
    padding: 4px 10px;
    border-radius: 20px;
    font-weight: 500;
  }
  .badge-s { background: var(--red-bg); color: var(--red); }

  /* Date Selector */
  .date-selector {
    display: flex;
    gap: 6px;
    margin-bottom: 24px;
    overflow-x: auto;
    padding-bottom: 4px;
    -webkit-overflow-scrolling: touch;
  }
  .date-selector::-webkit-scrollbar { display: none; }
  .date-btn {
    flex-shrink: 0;
    padding: 10px 16px;
    border-radius: 12px;
    background: var(--card-bg);
    border: 1px solid rgba(255,255,255,0.04);
    color: var(--text-dim);
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    text-align: center;
    min-width: 72px;
  }
  .date-btn.active {
    background: rgba(255,255,255,0.08);
    color: var(--text);
    border-color: rgba(255,255,255,0.12);
  }
  .date-btn .day-name {
    font-size: 10px;
    color: var(--text-dim);
    display: block;
    margin-bottom: 2px;
  }
  .date-btn.active .day-name { color: var(--text-mid); }

  /* Progress Bar */
  .progress-section { margin-bottom: 24px; }
  .progress-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
  }
  .progress-label { font-size: 13px; color: var(--text-dim); }
  .progress-count { font-size: 13px; color: var(--green); font-weight: 600; }
  .progress-bar {
    height: 6px;
    background: var(--card-bg);
    border-radius: 3px;
    overflow: hidden;
  }
  .progress-fill {
    height: 100%;
    background: var(--green);
    border-radius: 3px;
    transition: width 0.4s ease;
  }

  /* Customer Cards */
  .customer-list { display: flex; flex-direction: column; gap: 10px; }

  .customer-card {
    background: var(--card-bg);
    border-radius: var(--radius);
    padding: 16px 20px;
    border: 1px solid rgba(255,255,255,0.04);
    cursor: pointer;
    transition: all 0.2s ease;
    position: relative;
    overflow: hidden;
  }
  .customer-card::before {
    content: '';
    position: absolute;
    top: 0; left: 0;
    width: 4px;
    height: 100%;
  }
  .customer-card.priority-s::before { background: var(--red); }
  .customer-card.priority-a::before { background: var(--yellow); }
  .customer-card.priority-b::before { background: var(--blue); }

  .customer-card.done {
    background: var(--done-bg);
    border-color: rgba(46,213,115,0.1);
    opacity: 0.7;
  }
  .customer-card.done::before { background: var(--green); }
  .customer-card:active { transform: scale(0.98); }

  .card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 6px;
  }
  .customer-name { font-size: 16px; font-weight: 600; }
  .priority-tag {
    font-size: 11px;
    padding: 2px 8px;
    border-radius: 6px;
    font-weight: 600;
  }
  .tag-s { background: var(--red-bg); color: var(--red); }
  .tag-a { background: var(--yellow-bg); color: var(--yellow); }
  .tag-b { background: rgba(55,66,250,0.1); color: #7c83ff; }

  .card-stage { font-size: 12px; color: var(--text-mid); margin-bottom: 4px; }
  .card-issue { font-size: 13px; color: var(--text-dim); margin-bottom: 4px; }
  .card-silent { font-size: 11px; color: var(--text-dim); }

  /* Expandable Detail */
  .card-detail {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s ease, opacity 0.3s ease;
    opacity: 0;
  }
  .customer-card.expanded .card-detail {
    max-height: 1200px;
    opacity: 1;
  }
  .detail-divider {
    height: 1px;
    background: rgba(255,255,255,0.06);
    margin: 14px 0;
  }
  .detail-section-title {
    font-size: 11px;
    color: var(--text-dim);
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 6px;
  }
  .detail-action {
    font-size: 14px;
    color: var(--text);
    line-height: 1.6;
    margin-bottom: 12px;
  }
  .detail-script {
    font-size: 13px;
    color: var(--text-mid);
    line-height: 1.6;
    background: rgba(255,255,255,0.03);
    padding: 12px;
    border-radius: 10px;
    margin-bottom: 14px;
  }

  /* A/B/C Tab Switcher */
  .view-tabs {
    display: flex;
    gap: 4px;
    margin-bottom: 14px;
    background: rgba(255,255,255,0.03);
    border-radius: 10px;
    padding: 3px;
  }
  .view-tab {
    flex: 1;
    text-align: center;
    padding: 7px 8px;
    border-radius: 8px;
    font-size: 12px;
    font-weight: 500;
    color: var(--text-dim);
    cursor: pointer;
    transition: all 0.2s ease;
    border: none;
    background: none;
    font-family: 'Noto Sans SC', sans-serif;
  }
  .view-tab.active {
    background: rgba(255,255,255,0.08);
    color: var(--text);
  }
  .view-tab:active { transform: scale(0.95); }

  /* View panels */
  .view-panel { display: none; }
  .view-panel.active { display: block; }

  /* Bç‰ˆå†³ç­–ç®€æŠ¥é¢å¤–æ ·å¼ */
  .brief-item {
    margin-bottom: 10px;
  }
  .brief-label {
    font-size: 11px;
    color: var(--text-dim);
    margin-bottom: 2px;
  }
  .brief-value {
    font-size: 14px;
    color: var(--text);
    line-height: 1.5;
  }

  /* Cç‰ˆå…¨æ™¯æŠ¥å‘Šé¢å¤–æ ·å¼ */
  .report-section {
    margin-bottom: 14px;
  }
  .report-section-title {
    font-size: 12px;
    color: var(--yellow);
    font-weight: 600;
    margin-bottom: 4px;
  }
  .report-text {
    font-size: 13px;
    color: var(--text-mid);
    line-height: 1.6;
  }

  /* Done Button + Undo */
  .btn-group {
    display: flex;
    gap: 8px;
  }
  .done-btn {
    flex: 1;
    padding: 12px;
    border-radius: 12px;
    border: none;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    font-family: 'Noto Sans SC', sans-serif;
  }
  .done-btn.pending {
    background: var(--green);
    color: #000;
  }
  .done-btn.pending:active { transform: scale(0.97); }
  .done-btn.completed {
    background: rgba(46,213,115,0.1);
    color: var(--green);
    border: 1px solid rgba(46,213,115,0.2);
  }
  .undo-btn {
    display: none;
    padding: 12px 16px;
    border-radius: 12px;
    border: 1px solid rgba(255,255,255,0.1);
    background: transparent;
    color: var(--text-dim);
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    font-family: 'Noto Sans SC', sans-serif;
    white-space: nowrap;
  }
  .undo-btn.visible { display: block; }
  .undo-btn:active { transform: scale(0.97); background: rgba(255,255,255,0.04); }

  /* Animations */
  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(12px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .customer-card { animation: fadeUp 0.4s ease both; }
  .customer-card:nth-child(1) { animation-delay: 0.05s; }
  .customer-card:nth-child(2) { animation-delay: 0.1s; }
  .customer-card:nth-child(3) { animation-delay: 0.15s; }
  .customer-card:nth-child(4) { animation-delay: 0.2s; }
  .customer-card:nth-child(5) { animation-delay: 0.25s; }
</style>
</head>
<body>

<div class="header">
  <h1>éœ„å‰‘çš„è·Ÿè¿›æ¸…å•</h1>
  <span class="badge badge-s">S+A+B1</span>
</div>

<!-- Date Selector -->
<div class="date-selector">
  <div class="date-btn active" onclick="switchDate(this, '0301')">
    <span class="day-name">å‘¨å…­</span>3/1
  </div>
  <div class="date-btn" onclick="switchDate(this, '0302')">
    <span class="day-name">å‘¨æ—¥</span>3/2
  </div>
  <div class="date-btn" onclick="switchDate(this, '0303')">
    <span class="day-name">å‘¨ä¸€</span>3/3
  </div>
  <div class="date-btn" onclick="switchDate(this, '0304')">
    <span class="day-name">å‘¨äºŒ</span>3/4
  </div>
  <div class="date-btn" onclick="switchDate(this, '0305')">
    <span class="day-name">å‘¨ä¸‰</span>3/5
  </div>
</div>

<!-- Progress -->
<div class="progress-section">
  <div class="progress-header">
    <span class="progress-label">ä»Šæ—¥è¿›åº¦</span>
    <span class="progress-count" id="progress-text">0/3 å·²è·Ÿè¿›</span>
  </div>
  <div class="progress-bar">
    <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
  </div>
</div>

<!-- Customer List -->
<div class="customer-list" id="customer-list">

  <!-- Sçº§ç¤ºä¾‹ -->
  <div class="customer-card priority-s" data-id="demo1" onclick="toggleCard(this)">
    <div class="card-header">
      <span class="customer-name">å¼ å§ (Jane)</span>
      <span class="priority-tag tag-s">Sçº§</span>
    </div>
    <div class="card-stage">é€‰ææœŸ Â· é¢æ–™æ–¹å‘æœªå®š</div>
    <div class="card-issue">å­•æ™šæœŸ+ä¸¤ä¸ªå­©å­ï¼Œéœ€è¦å¥½æ‰“ç†çš„é¢æ–™</div>
    <div class="card-silent">æ²‰é»˜ 3å¤© Â· ä¸Šæ¬¡ä½ ä»¬èŠäº†çš®å’Œå¸ƒçš„åŒºåˆ«</div>

    <div class="card-detail">
      <div class="detail-divider"></div>

      <!-- A/B/C Tab -->
      <div class="view-tabs">
        <button class="view-tab active" onclick="switchView(event, this, 'a')">è¡ŒåŠ¨å¡ç‰‡</button>
        <button class="view-tab" onclick="switchView(event, this, 'b')">å†³ç­–ç®€æŠ¥</button>
        <button class="view-tab" onclick="switchView(event, this, 'c')">å…¨æ™¯æŠ¥å‘Š</button>
      </div>

      <!-- A: è¡ŒåŠ¨å¡ç‰‡ -->
      <div class="view-panel active" data-view="a">
        <div class="detail-section-title">ä¸‹ä¸€æ­¥</div>
        <div class="detail-action">å…ˆç¡®è®¤å¥¹å€¾å‘çš®è¿˜æ˜¯å¸ƒï¼Œä¸è¦ç›´æ¥å¯„æ ·ã€‚å¥¹å®¶æœ‰å°å­©è¦å¥½æ‰“ç†ï¼Œç§‘æŠ€å¸ƒå¯èƒ½æ˜¯æœ€ä¼˜è§£ã€‚</div>
        <div class="detail-section-title">å»ºè®®è¯æœ¯</div>
        <div class="detail-script">
          "å¼ å§ï¼Œä¹‹å‰å’±èŠäº†çš®å’Œå¸ƒä¸¤ä¸ªæ–¹å‘ï¼Œæˆ‘æƒ³äº†æƒ³ä½ å®¶æœ‰å°æœ‹å‹ï¼Œæˆ‘è§‰å¾—å¯ä»¥é‡ç‚¹çœ‹çœ‹ç§‘æŠ€å¸ƒâ€”â€”é˜²æ°´é˜²æ±¡å¥½æ‰“ç†ï¼Œçœ‹èµ·æ¥è·ŸçœŸçš®ä¹Ÿå·®ä¸å¤šã€‚ä½ è§‰å¾—è¿™ä¸ªæ–¹å‘OKçš„è¯ï¼Œæˆ‘ç»™ä½ å¯„å‡ å—æ ·çœ‹çœ‹æ‰‹æ„Ÿï¼Ÿ"
        </div>
        <div class="detail-section-title">é£é™©æç¤º</div>
        <div class="detail-action" style="color:var(--yellow);">ä¸­é£é™© Â· å­•æ™šæœŸå¯èƒ½æš‚åœå†³ç­–ï¼Œåˆ«å‚¬å¤ªç´§</div>
      </div>

      <!-- B: å†³ç­–ç®€æŠ¥ -->
      <div class="view-panel" data-view="b">
        <div class="brief-item">
          <div class="brief-label">å®¢æˆ·é˜¶æ®µ</div>
          <div class="brief-value">é€‰ææœŸ â€” å·²æœ‰éœ€æ±‚ï¼Œé¢æ–™æ–¹å‘æœªå®š</div>
        </div>
        <div class="brief-item">
          <div class="brief-label">æ ¸å¿ƒå¡ç‚¹</div>
          <div class="brief-value">é¢æ–™é€‰æ‹©ï¼šçš® vs å¸ƒï¼Œéœ€è¦å¥½æ‰“ç†ï¼ˆå®¶æœ‰å°å­©ï¼‰</div>
        </div>
        <div class="brief-item">
          <div class="brief-label">å€¼å¾—è·Ÿå—</div>
          <div class="brief-value" style="color:var(--green);">å€¼å¾— Â· éœ€æ±‚æ˜ç¡®ï¼Œé¢„ç®—å……è¶³ï¼Œåªå·®æ¨ä¸€æ­¥</div>
        </div>
        <div class="brief-item">
          <div class="brief-label">èƒœç‡</div>
          <div class="brief-value">65% â€” é¢æ–™æ–¹å‘ç¡®è®¤åå¯å¿«é€Ÿæ¨è¿›</div>
        </div>
        <div class="brief-item">
          <div class="brief-label">æµå¤±é£é™©</div>
          <div class="brief-value" style="color:var(--yellow);">ä¸­ Â· å­•æ™šæœŸç²¾åŠ›æœ‰é™ï¼Œå¯èƒ½æš‚åœ</div>
        </div>
      </div>

      <!-- C: å…¨æ™¯æŠ¥å‘Š -->
      <div class="view-panel" data-view="c">
        <div class="report-section">
          <div class="report-section-title">å®¢æˆ·ç”»åƒ</div>
          <div class="report-text">å­•æ™šæœŸå¦ˆå¦ˆï¼Œå®¶æœ‰ä¸¤ä¸ªå°å­©ã€‚å¯¹å®¶å…·å“è´¨æœ‰è¦æ±‚ï¼Œå…³æ³¨å®ç”¨æ€§å’Œæ˜“æ‰“ç†ã€‚é€šè¿‡å°çº¢ä¹¦äº†è§£åˆ°å“ç‰Œï¼Œå¯¹å¤åˆ»æ²™å‘æœ‰æ˜ç¡®å…´è¶£ã€‚</div>
        </div>
        <div class="report-section">
          <div class="report-section-title">äº’åŠ¨å†å²</div>
          <div class="report-text">é¦–æ¬¡å’¨è¯¢3æœˆå‰ï¼Œå…±èŠå¤©42æ¡ã€‚å‰æœŸèŠäº†æ¬¾å¼åå¥½ï¼Œè¿‘æœŸé›†ä¸­åœ¨é¢æ–™é€‰æ‹©ã€‚é”€å”®å“åº”åŠæ—¶ï¼Œä½†æœªä¸»åŠ¨å¼•å¯¼é¢æ–™å†³ç­–ã€‚</div>
        </div>
        <div class="report-section">
          <div class="report-section-title">ç«å“åˆ†æ</div>
          <div class="report-text">æåˆ°è¿‡"å¦ä¸€å®¶ä¹Ÿæœ‰ç±»ä¼¼çš„"ï¼Œç–‘ä¼¼åœ¨å¯¹æ¯”å…¶ä»–å¤åˆ»å“ç‰Œã€‚æœªæåŠå…·ä½“ç«å“åç§°ï¼Œä»·æ ¼æ•æ„Ÿåº¦ä½ã€‚</div>
        </div>
        <div class="report-section">
          <div class="report-section-title">é”€å”®è¡Œä¸ºè¯Šæ–­</div>
          <div class="report-text">å“åº”é€Ÿåº¦è‰¯å¥½ï¼ˆå¹³å‡2hå†…ï¼‰ï¼Œä½†ç¼ºå°‘ä¸»åŠ¨è·Ÿè¿›ã€‚å®¢æˆ·æ²‰é»˜3å¤©æœªè§¦å‘è·Ÿè¿›ï¼Œå»ºè®®è®¾ç½®48hè·Ÿè¿›æé†’ã€‚</div>
        </div>
        <div class="report-section">
          <div class="report-section-title">é£é™©æˆæœ¬è¯„ä¼°</div>
          <div class="report-text">é¢„ä¼°å®¢å•ä»·Â¥22,000ã€‚å½“å‰æŠ•å…¥æ—¶é—´æˆæœ¬çº¦2hï¼ŒROIè‰¯å¥½ã€‚ä¸»è¦é£é™©ï¼šå­•æ™šæœŸå†³ç­–å»¶è¿Ÿï¼Œå»ºè®®ä¿æŒä½å‹åŠ›æŒç»­è§¦è¾¾ã€‚</div>
        </div>
      </div>

      <div class="btn-group">
        <button class="done-btn pending" onclick="markDone(event, 'demo1')">âœ“ å·²è·Ÿè¿›</button>
        <button class="undo-btn" onclick="undoDone(event, 'demo1')">æ’¤é”€</button>
      </div>
    </div>
  </div>

  <!-- Açº§ç¤ºä¾‹ -->
  <div class="customer-card priority-a" data-id="demo2" onclick="toggleCard(this)">
    <div class="card-header">
      <span class="customer-name">å°ç±³</span>
      <span class="priority-tag tag-a">Açº§</span>
    </div>
    <div class="card-stage">é€‰ææœŸ Â· é¢æ–™çº ç»“ä¸­</div>
    <div class="card-issue">å¯¹å“ç‰Œè®¤å¯åº¦é«˜ï¼Œåœ¨å‡ ç§é¢æ–™é—´çŠ¹è±«</div>
    <div class="card-silent">æ²‰é»˜ 5å¤© Â· ä¸Šæ¬¡èŠäº†é›ªå°¼å°”å’Œç§‘æŠ€å¸ƒ</div>

    <div class="card-detail">
      <div class="detail-divider"></div>

      <div class="view-tabs">
        <button class="view-tab active" onclick="switchView(event, this, 'a')">è¡ŒåŠ¨å¡ç‰‡</button>
        <button class="view-tab" onclick="switchView(event, this, 'b')">å†³ç­–ç®€æŠ¥</button>
        <button class="view-tab" onclick="switchView(event, this, 'c')">å…¨æ™¯æŠ¥å‘Š</button>
      </div>

      <div class="view-panel active" data-view="a">
        <div class="detail-section-title">ä¸‹ä¸€æ­¥</div>
        <div class="detail-action">å…ˆå¸®å¥¹ç¼©å°é¢æ–™èŒƒå›´ï¼Œé—®æ¸…æ¥šå®¶é‡Œä½¿ç”¨åœºæ™¯ï¼ˆæœ‰æ²¡æœ‰å°å­©/å® ç‰©/æ—¥ç…§å¼ºä¸å¼ºï¼‰ï¼Œå†å†³å®šæ˜¯å¦å¯„æ ·ã€‚</div>
        <div class="detail-section-title">å»ºè®®è¯æœ¯</div>
        <div class="detail-script">
          "å°ç±³å§ï¼Œé›ªå°¼å°”å’Œç§‘æŠ€å¸ƒå„æœ‰ä¼˜åŠ¿ï½æˆ‘å¸®ä½ ç¼©å°ä¸€ä¸‹èŒƒå›´ï¼šä½ å®¶å¹³æ—¶æœ‰å°æœ‹å‹æˆ–å® ç‰©å—ï¼Ÿå¦‚æœéœ€è¦è€ç£¨å¥½æ‰“ç†ï¼Œç§‘æŠ€å¸ƒä¼šæ›´åˆé€‚ï¼›å¦‚æœè¿½æ±‚è§¦æ„ŸæŸ”è½¯ï¼Œé›ªå°¼å°”ä½“éªŒæ„Ÿæ›´å¥½ã€‚ä½ å…ˆå‘Šè¯‰æˆ‘ï¼Œæˆ‘å¸®ä½ é€‰æœ€é€‚åˆçš„å¯„è¿‡å»çœ‹çœ‹ï¼Ÿ"
        </div>
      </div>

      <div class="view-panel" data-view="b">
        <div class="brief-item">
          <div class="brief-label">å®¢æˆ·é˜¶æ®µ</div>
          <div class="brief-value">é€‰ææœŸ â€” å“ç‰Œå·²è®¤å¯ï¼Œé¢æ–™çŠ¹è±«ä¸­</div>
        </div>
        <div class="brief-item">
          <div class="brief-label">æ ¸å¿ƒå¡ç‚¹</div>
          <div class="brief-value">é›ªå°¼å°” vs ç§‘æŠ€å¸ƒï¼Œç¼ºå°‘å†³ç­–ä¾æ®</div>
        </div>
        <div class="brief-item">
          <div class="brief-label">å€¼å¾—è·Ÿå—</div>
          <div class="brief-value" style="color:var(--green);">å€¼å¾— Â· å“ç‰Œè®¤å¯åº¦é«˜ï¼Œæ¨ä¸€æ­¥å°±è¿›è®®ä»·</div>
        </div>
        <div class="brief-item">
          <div class="brief-label">èƒœç‡</div>
          <div class="brief-value">70% â€” å¸®å¥¹é€‰å®šé¢æ–™åå¤§æ¦‚ç‡æˆäº¤</div>
        </div>
      </div>

      <div class="view-panel" data-view="c">
        <div class="report-section">
          <div class="report-section-title">å®¢æˆ·ç”»åƒ</div>
          <div class="report-text">å¯¹å“ç‰Œè®¤å¯åº¦é«˜ï¼Œä¸»åŠ¨å’¨è¯¢å¤šæ¬¾æ²™å‘ã€‚å¯¹é¢æ–™å“è´¨æ•æ„Ÿï¼Œå–œæ¬¢å¯¹æ¯”ä¸åŒæè´¨ã€‚å†³ç­–é£æ ¼åç†æ€§ï¼Œéœ€è¦å……åˆ†ä¿¡æ¯æ”¯æ’‘ã€‚</div>
        </div>
        <div class="report-section">
          <div class="report-section-title">äº’åŠ¨å†å²</div>
          <div class="report-text">28æ¡èŠå¤©è®°å½•ï¼Œé›†ä¸­åœ¨é¢æ–™è®¨è®ºã€‚ä¸Šæ¬¡èŠå¤©5å¤©å‰ï¼Œè¯é¢˜åœ¨é›ªå°¼å°”å’Œç§‘æŠ€å¸ƒé—´åå¤ï¼Œæœªåšå‡ºå€¾å‘æ€§é€‰æ‹©ã€‚</div>
        </div>
        <div class="report-section">
          <div class="report-section-title">é”€å”®è¡Œä¸ºè¯Šæ–­</div>
          <div class="report-text">é¢æ–™ä»‹ç»åˆ°ä½ï¼Œä½†ç¼ºå°‘åœºæ™¯åŒ–å¼•å¯¼ã€‚å»ºè®®æ ¹æ®å®¢æˆ·å®¶åº­ä½¿ç”¨åœºæ™¯ç¼©å°é€‰æ‹©èŒƒå›´ï¼Œé™ä½å†³ç­–éš¾åº¦ã€‚</div>
        </div>
      </div>

      <div class="btn-group">
        <button class="done-btn pending" onclick="markDone(event, 'demo2')">âœ“ å·²è·Ÿè¿›</button>
        <button class="undo-btn" onclick="undoDone(event, 'demo2')">æ’¤é”€</button>
      </div>
    </div>
  </div>

  <!-- B1çº§ç¤ºä¾‹ -->
  <div class="customer-card priority-b" data-id="demo3" onclick="toggleCard(this)">
    <div class="card-header">
      <span class="customer-name">Lily (åŠ æ‹¿å¤§)</span>
      <span class="priority-tag tag-b">B1çº§</span>
    </div>
    <div class="card-stage">é€‰å“æœŸ Â· æµ·è¿ä¿¡ä»»æœªè§£å†³</div>
    <div class="card-issue">è´­ä¹°åŠ›OKï¼Œæ‹…å¿ƒæµ·è¿æŸåå’Œå”®å</div>
    <div class="card-silent">æ²‰é»˜ 12å¤© Â· ä¸Šæ¬¡é—®äº†è¿è´¹å’Œä¿é™©</div>

    <div class="card-detail">
      <div class="detail-divider"></div>

      <div class="view-tabs">
        <button class="view-tab active" onclick="switchView(event, this, 'a')">è¡ŒåŠ¨å¡ç‰‡</button>
        <button class="view-tab" onclick="switchView(event, this, 'b')">å†³ç­–ç®€æŠ¥</button>
        <button class="view-tab" onclick="switchView(event, this, 'c')">å…¨æ™¯æŠ¥å‘Š</button>
      </div>

      <div class="view-panel active" data-view="a">
        <div class="detail-section-title">ä¸‹ä¸€æ­¥</div>
        <div class="detail-action">è§£å†³è¿è¾“ä¿¡ä»»é—®é¢˜ã€‚å‘ä¹‹å‰æµ·å¤–å®¢æˆ·çš„å¼€ç®±è§†é¢‘/ç…§ç‰‡ï¼Œå±•ç¤ºåŒ…è£…è´¨é‡ã€‚å¼ºè°ƒè¿è¾“ä¿é™©å’Œå”®åæ‰¿è¯ºã€‚</div>
        <div class="detail-section-title">å»ºè®®è¯æœ¯</div>
        <div class="detail-script">
          "Lilyä½ å¥½ï½ä¸Šæ¬¡ä½ é—®çš„æµ·è¿é—®é¢˜æˆ‘æ•´ç†äº†ä¸€ä¸‹ï¼šæˆ‘ä»¬å‘åŠ æ‹¿å¤§çš„å®¢æˆ·å·²ç»æœ‰å¥½å‡ ä¸ªäº†ï¼Œå…¨ç¨‹æœ¨æ¶æ‰“åŒ…+è¿è¾“é™©å…¨ä¿ã€‚ç»™ä½ çœ‹å‡ ä¸ªå®¢æˆ·æ”¶åˆ°è´§çš„ç…§ç‰‡ï¼ŒåŒ…è£…å®Œå¥½çš„ğŸ‘‡"
        </div>
      </div>

      <div class="view-panel" data-view="b">
        <div class="brief-item">
          <div class="brief-label">å®¢æˆ·é˜¶æ®µ</div>
          <div class="brief-value">é€‰å“æœŸ â€” æ¬¾å¼åŸºæœ¬ç¡®å®šï¼Œå¡åœ¨ç‰©æµä¿¡ä»»</div>
        </div>
        <div class="brief-item">
          <div class="brief-label">æ ¸å¿ƒå¡ç‚¹</div>
          <div class="brief-value">æµ·è¿æŸåé£é™©ã€å”®åä¿éšœä¸æ˜ç¡®</div>
        </div>
        <div class="brief-item">
          <div class="brief-label">å€¼å¾—è·Ÿå—</div>
          <div class="brief-value" style="color:var(--green);">å€¼å¾— Â· è´­ä¹°åŠ›å……è¶³ï¼Œå¡ç‚¹ä¸æ˜¯ä»·æ ¼</div>
        </div>
        <div class="brief-item">
          <div class="brief-label">èƒœç‡</div>
          <div class="brief-value">55% â€” è§£å†³è¿è¾“é¡¾è™‘åå¯æ¨è¿›</div>
        </div>
        <div class="brief-item">
          <div class="brief-label">æµ·å¤–å®¢æˆ·æ³¨æ„</div>
          <div class="brief-value" style="color:var(--yellow);">è´­ä¹°åŠ›çœ‹é—´æ¥ä¿¡å·ï¼Œå¡ç‚¹ä¼˜å…ˆè€ƒè™‘è¿è¾“ä¿¡ä»»</div>
        </div>
      </div>

      <div class="view-panel" data-view="c">
        <div class="report-section">
          <div class="report-section-title">å®¢æˆ·ç”»åƒ</div>
          <div class="report-text">åŠ æ‹¿å¤§åäººï¼Œè‹±æ–‡æ²Ÿé€šä¸ºä¸»ã€‚å¯¹å“è´¨æœ‰è¦æ±‚ï¼Œä»·æ ¼æ•æ„Ÿåº¦ä½ã€‚ä¸»è¦é¡¾è™‘æ˜¯è·¨å›½ç‰©æµçš„å¯é æ€§å’Œå”®åæœåŠ¡ã€‚</div>
        </div>
        <div class="report-section">
          <div class="report-section-title">ç«å“åˆ†æ</div>
          <div class="report-text">çœŸç«å“ä¸æ˜¯å…¶ä»–å¤åˆ»å“ç‰Œï¼Œè€Œæ˜¯å½“åœ°å®¶å…·åº—å’Œæ·˜å®ç›´é‚®ã€‚æ ¸å¿ƒä¼˜åŠ¿éœ€æ‰“åœ¨ï¼šå“è´¨+ä¸“ä¸šåŒ…è£…+è¿è¾“ä¿éšœã€‚</div>
        </div>
        <div class="report-section">
          <div class="report-section-title">äº’åŠ¨å†å²</div>
          <div class="report-text">35æ¡èŠå¤©ï¼Œå‰æœŸæ¬¾å¼è®¨è®ºç§¯æã€‚è¿‘12å¤©æ²‰é»˜å§‹äºè¯¢é—®è¿è´¹å’Œä¿é™©åæœªå¾—åˆ°æ»¡æ„ç­”å¤ã€‚å›å¤é—´éš”æ˜æ˜¾æ‹‰é•¿ã€‚</div>
        </div>
        <div class="report-section">
          <div class="report-section-title">æµå¤±é¢„æµ‹</div>
          <div class="report-text" style="color:var(--yellow);">ä¸­é«˜é£é™© Â· å›å¤é—´éš”ä»1å¤©æ‹‰åˆ°5å¤©ï¼Œæ¶ˆæ¯å˜çŸ­ï¼Œè¯­æ°”è¶‹å†·ã€‚å†ä¸è·Ÿè¿›å¯èƒ½å½»åº•æµå¤±ã€‚</div>
        </div>
      </div>

      <div class="btn-group">
        <button class="done-btn pending" onclick="markDone(event, 'demo3')">âœ“ å·²è·Ÿè¿›</button>
        <button class="undo-btn" onclick="undoDone(event, 'demo3')">æ’¤é”€</button>
      </div>
    </div>
  </div>

</div>

<script>
const SHEET_URL = 'YOUR_GOOGLE_APPS_SCRIPT_URL';
const SALES_NAME = 'éœ„å‰‘';

function toggleCard(card) {
  if (event.target.closest('.done-btn') || event.target.closest('.undo-btn') || event.target.closest('.view-tab')) return;
  card.classList.toggle('expanded');
}

function switchView(e, tab, view) {
  e.stopPropagation();
  const card = tab.closest('.customer-card');
  card.querySelectorAll('.view-tab').forEach(t => t.classList.remove('active'));
  card.querySelectorAll('.view-panel').forEach(p => p.classList.remove('active'));
  tab.classList.add('active');
  card.querySelector(`.view-panel[data-view="${view}"]`).classList.add('active');
}

function switchDate(btn, date) {
  document.querySelectorAll('.date-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  updateProgress();
}

function markDone(e, customerId) {
  e.stopPropagation();
  const card = document.querySelector(`[data-id="${customerId}"]`);
  const btn = card.querySelector('.done-btn');
  const undoBtn = card.querySelector('.undo-btn');

  if (card.classList.contains('done')) return;

  card.classList.add('done');
  btn.classList.remove('pending');
  btn.classList.add('completed');
  btn.textContent = 'âœ“ å·²å®Œæˆ';
  undoBtn.classList.add('visible');

  // è®°å½•åˆ°æœ¬åœ°
  const doneList = JSON.parse(localStorage.getItem('done') || '[]');
  doneList.push({
    id: customerId,
    sales: SALES_NAME,
    time: new Date().toISOString()
  });
  localStorage.setItem('done', JSON.stringify(doneList));

  // åŒæ­¥åˆ°Google Sheets
  if (SHEET_URL !== 'YOUR_GOOGLE_APPS_SCRIPT_URL') {
    fetch(SHEET_URL, {
      method: 'POST',
      mode: 'no-cors',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        action: 'markDone',
        sales: SALES_NAME,
        customerId: customerId,
        customerName: card.querySelector('.customer-name').textContent,
        time: new Date().toISOString()
      })
    }).catch(err => console.log('Sync failed, saved locally'));
  }

  updateProgress();
}

function undoDone(e, customerId) {
  e.stopPropagation();
  const card = document.querySelector(`[data-id="${customerId}"]`);
  const btn = card.querySelector('.done-btn');
  const undoBtn = card.querySelector('.undo-btn');

  card.classList.remove('done');
  btn.classList.remove('completed');
  btn.classList.add('pending');
  btn.textContent = 'âœ“ å·²è·Ÿè¿›';
  undoBtn.classList.remove('visible');

  // ä»æœ¬åœ°ç§»é™¤
  let doneList = JSON.parse(localStorage.getItem('done') || '[]');
  doneList = doneList.filter(item => item.id !== customerId);
  localStorage.setItem('done', JSON.stringify(doneList));

  // åŒæ­¥æ’¤é”€åˆ°Google Sheets
  if (SHEET_URL !== 'YOUR_GOOGLE_APPS_SCRIPT_URL') {
    fetch(SHEET_URL, {
      method: 'POST',
      mode: 'no-cors',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        action: 'undoDone',
        sales: SALES_NAME,
        customerId: customerId,
        time: new Date().toISOString()
      })
    }).catch(err => console.log('Undo sync failed'));
  }

  updateProgress();
}

function updateProgress() {
  const total = document.querySelectorAll('.customer-card').length;
  const done = document.querySelectorAll('.customer-card.done').length;
  document.getElementById('progress-text').textContent = `${done}/${total} å·²è·Ÿè¿›`;
  document.getElementById('progress-fill').style.width = `${(done/total)*100}%`;
}

// Init
updateProgress();

// æ¢å¤å·²å®ŒæˆçŠ¶æ€
const saved = JSON.parse(localStorage.getItem('done') || '[]');
saved.forEach(item => {
  const card = document.querySelector(`[data-id="${item.id}"]`);
  if (card) {
    card.classList.add('done');
    const btn = card.querySelector('.done-btn');
    btn.classList.remove('pending');
    btn.classList.add('completed');
    btn.textContent = 'âœ“ å·²å®Œæˆ';
    const undoBtn = card.querySelector('.undo-btn');
    undoBtn.classList.add('visible');
  }
});
updateProgress();
</script>

</body>
</html>
